 [followup to email pleas unless you'r specif concern about some particular bit of email polici for python.org] ok after much fiddl with and tweak of number and /etc/exim/local_scan.pi on mail.python.org i am fair confid that i can start harvest all incom email at a moment notic for the record here how it all work * number work almost exact the same as befor if the file /etc/exim/harvest doe not exist that is ani "junk mail condition" that can be detect by exim acl (access control lists) is handl entir in number the messag is reject befor it ever get to local_scan.pi this cover such divers case as "messag from known spammer" (reject after everi rcpt to command) "no message-id header" and number char in subject" (both reject after the messag headers/bodi are read) the main thing i have chang in the absenc of /etc/exim/harvest are - don't check for number char in "from" header -- the vast major of hit for this test were bounc from some asian isp the remain hit should be handl by spamassassin - do header sender verif (ie ensur that there a verifi email address in at least one of "from" "reply-to" and "sender") as late as possibl becaus it requir dns lookup which can be slow (and can also make messag that should have been reject mere be defer if those dns lookup timeout) * if /etc/exim/harvest exist then the behaviour of all of those acl in number sudden chang instead of reject recipi or messag they add an x-reject header to the messag this header is pure for intern use it record the name of the folder to which the reject messag should be save and also give the smtp error messag which should ultim be use to reject the messag thus those messag will now be seen by local_scan.pi which now look for the x-reject header if found it use the folder name specifi there to save the messag and then reject it with the smtp error messag also given in x-reject (current x-reject is retain in save messages.) if a messag was not tag with x-reject then local_scan.pi run the usual virus and spam check (name my homebrew scan for attach with filenam that look like window execut and a run through spamassassin.) the logic is basic this if virus folder = "virus" els run through spamassassin if score  number folder = "rejected-spam" elif score  number folder = "caught-spam" final local_scan.pi write the messag to the design folder by far the biggest folder will be "accepted" -- the server handl number incom messag per day of which mayb number are junk mail (oop just realiz i haven't written the code that actual save the messag -- d'ohh also haven't written anyth to discrimin person email which i must do sigh.) * final the big catch wait until after you'v read the messag header and bodi to actual reject the messag is problemat becaus certain broken mtas (includ those use by some spammers) don't consid a number after data as a perman error but keep retri d'ohh this is a minor annoy current where a fair amount of stuff is reject at rcpt to time but in harvest mode *everything* (with the except of peopl probe for open relays) will be reject at data time so i have cook up someth call the asbl or autom sender blacklist this is just a berkeley db file that map (sender_ip sender_address) to an expiri time when local_scan() reject a messag from (sender_ip sender_address) -- for whatev reason includ find an x-reject header ad by an acl in number -- it add a record to the asbl with an expiri time number hour in the futur meanwhil there an acl in number that check for record in the asbl if there a record for the current (sender_ip sender_address) that hasn't expir yet we reject all recipi without ever look at the messag header or bodi the downsid of this from the point-of-view of corpus collect is that if some jerk is busili spam email one smtp connect per address we will most like onli get one copi this is a win if you'r just think about reduc server load and bandwidth but i'm not sure if it help for train spam detector tim happi harvest -- greg -- greg ward email URL budget in the red let tax religion -- dead kennedi